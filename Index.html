<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Recorrido Navideño - Sierra Grande</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<style>
  body { margin: 0; padding: 0; }
  #map { width: 100vw; height: 100vh; }
  
  /* Estética navideña */
  .leaflet-popup-content-wrapper {
    background: #fff5f5;
    border: 2px solid #d62828;
    border-radius: 10px;
  }
</style>
</head>
<body>
<div id="map"></div>

<script>
// 1. Crear mapa centrado en Sierra Grande
var map = L.map('map').setView([-41.606, -65.355], 14);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  maxZoom: 19,
  attribution: '© OpenStreetMap'
}).addTo(map);

// 2. Ícono de Papá Noel para el recorrido
var santaIcon = L.icon({
  iconUrl: "https://cdn-icons-png.flaticon.com/512/1046/1046899.png",
  iconSize: [40, 40],
  iconAnchor: [20, 20]
});

// 3. Tu ubicación real (GPS)
var userMarker = L.circleMarker([0,0], { radius: 8, color: 'blue', fillColor: '#3388ff', fillOpacity: 1 }).addTo(map);

map.locate({setView: true, watch: true, enableHighAccuracy: true});

map.on('locationfound', function(e) {
    userMarker.setLatLng(e.latlng);
});

map.on('locationerror', function(e) {
    alert("Para ver tu ubicación, activa el GPS y dale permiso al navegador.");
});

// 4. Recorrido y Paradas
var recorrido = [
  [-41.604, -65.360], [-41.600, -65.365], [-41.606, -65.355],
  [-41.610, -65.350], [-41.612, -65.345], [-41.608, -65.340],
  [-41.603, -65.338], [-41.605, -65.352]
];

L.polyline(recorrido, { color: "red", weight: 5, dashArray: '10, 10' }).addTo(map);

var paradas = [
  { coords: [-41.604, -65.360], nombre: "Salida: Bomberos" },
  { coords: [-41.600, -65.365], nombre: "Barrio Industrial" },
  { coords: [-41.606, -65.355], nombre: "Barrio Centro" },
  { coords: [-41.610, -65.350], nombre: "Barrio La Villa" },
  { coords: [-41.612, -65.345], nombre: "Barrio 9 de Julio" },
  { coords: [-41.608, -65.340], nombre: "Barrio 25 de Mayo" },
  { coords: [-41.603, -65.338], nombre: "Barrio La Loma" },
  { coords: [-41.605, -65.352], nombre: "Llegada: Plaza San Martín" }
];

paradas.forEach(p => {
  L.marker(p.coords, {icon: santaIcon}).addTo(map).bindPopup("<b>" + p.nombre + "</b>");
});
</script>
</body>
</html>
